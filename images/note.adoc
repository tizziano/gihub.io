
ASCIIDOC
========

Oggi proviamo questo nuovo sistema per trasformare i miei appunti in documenti 
decisamente più presentabili e accessibili. 

Il dilemma fondamentale è stabilire se sia cosa giusta passare da docutils 
(reST) a asciidoc. Dal momento che nessuno dei due sistemi è adatto agli scopi 
che mi prefiggo, mi interessa più che altro capire quale dei due mi permette di 
evidenziare il testo con geany in modo più semplice. 

reST è nato per documentare i sorgenti python, asciidoc è nato per generare 
documenti in HTML (e docbook). Se li vuoi confrontare, fai pure, ma alla fine 
potresti ritrovarti a dover usare entrambi o nessuno dei due. 

Il problema deriva dal fatto che se vuoi gestire dei progetti su GITHUB, reST 
non sarebbe lo strumento più adatto (verifica, falso. rest è supportato insieme 
agli altri), mentre asciidoc, in qualche modo, è supportato. Mi sono poi 
accorto che con geany posso usare sia reST che asciidoc alle stesse condizioni, 
però asciidoc risulterebbe più semplice (verifica). 

Se vuoi creare semplici pagine HTML, devi modificare gli stili CSS, non ci sono 
santi, se hai qualcosa da scrivere, fai prima con XOffice, come fanno tutti...

----
    asciidoc: Versione 8.6.6 Xubuntu 12.04

    Senza package raccomandati!!!
----

La documentazione è in /home/archivio/geany/textfiles/lightwmarkup/asciidoc
mentre in /home/archivio/python/23_docutils-rest si parla solo di reST.

cerca di riunire questa roba, che poi non la ritrovi mai!!!

== asciidoc e geany

L'editor dei file di testo è uno dei componenti più importanti del sistema 
operativo che utilizziamo. Per un certo aspetto, usare un editor di testo 
piuttosto che un altro è una scelta importante e su certi sistemi quasi 
obbligata. Su quale programma cade questa scelta può risultare a volte 
discutibile. Per quanto mi riguarda, da tempo utilizzo geany e per quanto 
discutibile come scelta, penso che continuerò ad usarlo e a preferirlo a molti 
altri programmi in questa categoria. 

A partire da geany 1.23 la libreria scintilla ha introdotto un 'tag parser' per 
asciidoc, almeno possiamo avere uno schema della struttura del documento nella 
barra dei simboli. Rispetto a docutils/reST, asciidoc dovrebbe offrire una 
marcatura meno marziana e la possibilità di gestire i CSS in modo più umano 
'[red]#(verificare)#'. 

Geany riconosce i file con estensione  *.asciidoc e permette, modificando il 
file filetypes.asciidoc, di configurarne la gestione. Ma prima di tutto, 
sarebbe opportuno che riconoscesse anche i file con estensione *.adoc. Per 
questo si può modificare una riga nel file 'filetype_extensions.conf':
----
Asciidoc=*.asciidoc;   --> Asciidoc=*.asciidoc;*.adoc;
----
Sarebbe anche possibile fare in modo che anche tutti i file txt venissero 
riconosciuti come file asciidoc, ma per il momento tralascerei questa 
operazione, dal momento che potrebbe anche risultare inutile e inopportuna. 

///////////////////////////////
todo:
    spiega cos'è un 'tag parser' (attenzione al termine 'tag');
    spiega come aprire i file di configurazione e come modificarli
    spiega come impostare il 'menu Genera':
        Compila articolo    asciidoc -v %d/%f
        Compila book        asciidoc -v -dbook -bxhtml11 %d/%f
        Apri nel browser    xdg-open %d/%e.html
///////////////////////////////

== asciidoc, docutils & c.

Tutti questi linguaggi di marcatura mancano di un sistema integrato per la 
visualizzazione diretta sul browser, o sull'applicazione che dovrebbe gestire 
il formato oggetto della conversione. Questo problema viene risolto solitamente 
utilizzando dei trucchi che sul lato server funzionano, ma nell'applicazione 
pratica dei PC non trova spazio (spiegameglio). 

L'ambiente di sviluppo Asciidoc è realizzato in Python e strutturalmente 
assomiglia o ricorda vagamente l'ambiente docutils. L'approccio si differenzia 
in quanto asciidoc usa delle 'DocBook tool-chain' (ambiente di sviluppo) per 
convertire i documenti. 

    - markup un po' semplificato
    - orientato alla produzione di documentazione
    - formalmente meno definito
    - utilizzo più diffuso, in certi ambienti

Quando si valutano pregi o difetti di uno di questi 'linguaggi' si devono 
prendere sempre in considerazione **tutti** i loro aspetti, e non semplicemente 
un paio:

    - caratteristiche del markup
    - ambiente di utilizzo
    - utilizzo/applicazioni tipici
    - tipi di backend ( o generatori di formato)
    - dipendenze software necessarie
    - standardizzazione
    - diffusione
    - e trovane altri che ce ne sono

'AsciiDoctor' è un altro 'coso', realizzato in ruby per un utilizzo su server e 
Java. Anche se qualcuno sta tentando di realizzare un'implementazione in 
JavaScript, partendo dai sorgenti di asciidoctor (ma si tratta della solita 
patacca), non esiste (ancora) un package asciidoc in javascript, magari in 
nodejs (reST è stato portato su nodejs?).

prova:
    http://rst.ninjs.org/
    https://notex.ch/ (usa sphynx)

----

    nota:
    Quando un software realizzato in python viene portato su ruby, è un brutto 
    segno, molto brutto, e, a mio parere, in qualche modo la sua condanna a 
    morte (vedi +/- il caso tiddlywiki). 

----

== il comando asciidoc

Come da tradizione, 'asciidoc' significa allo stesso tempo patata scarpa, 
pomodoro e, incidentalmente, un 'comando'. E una frase senza senso qui serve a 
completare e nascondere il concetto. Non è chiaro? fa lo stesso, guarda il 
video (già cominciano a girarmi le balle). 

Il comando asciidoc per il momento serve solo per compilare il file sorgente in 
un file HTML. 

----
$asciidoc -v note.adoc

...
asciidoc: ERROR: note.adoc: line 9: only book doctypes can contain level 0 sections
asciidoc: ERROR: note.adoc: line 31: only book doctypes can contain level 0 sections
----

Dobbiamo abituarci a leggere gli errori che fioccano e imparare a capire come 
evitarli. In questo caso è colpa di questo documento che sto scrivendo. Per 
default il comando cerca di compilare un articolo in HTML (xhtml11), ma non gli 
va che in un articolo ci siano delle sezioni di primo livello.

----
    = una sezione di primo livello

    un'altra sezione di primo livello
    =================================

    == una sezione di secondo livello

    un'altra sezione di secondo livello
    -----------------------------------
----

Cosa sia una 'sezione' ( e una 'riga' e anche un 'paragrafo') lo vediamo tra 
poco, pazienza. Per il momento ho modificato queste sezioni in sezioni di 
secondo livello, tanto per poterlo stare zitto. Infatti ripetendo il comando, gli 
errori sono spariti. Nel frattempo ho imparato a definire un blocco:
----
    ----
    questo è un blocco, qui posso mostrare come si deve scrivere il markup 
    che sto usando nel testo per ottenere una formattazione specifica.
    ----
----

== articolo/libro

Cosa sia un *article*, non è al momento molto chiaro. I due termini 
provengono dal contesto di docbook. Purtroppo la documentazione sembra scritta 
in una strana lingua illeggibile, servirebbe una traduzione comprensibile, se 
non in italiano, almeno in inglese. 

article::
    Used for short documents, articles and general documentation. See the 
    AsciiDoc distribution ./doc/article.txt example. +
    AsciiDoc defines standard DocBook article frontmatter and backmatter 
    section markup templates (appendix, abstract, bibliography, glossary, 
    index).

In sostanza la differenza si riduce al fatto che essendo il numero di 
intestazioni limitato (HTML == H1..H6), alcune di queste sono riservate per 
strutturare documenti complessi come i libri, quindi non possono essere 
utilizzate in un articolo!

Se volessi compilare qualcosa di diverso, l'html va bene, posso chiedere di 
compilare un libro:
----
    asciidoc -v -dbook -bxhtml11 fname
----

doctype e backend:
    sono due cose distinte
    doctype: article, book, manpage
    backend: -bxhtml11, -bdocbook45, -bhtml4, -bhtml5, -bslidy, -bwordpress, e 
    altre cagate
    
al momento, per evitare varie menate, utilizza il comando:

asciidoc -v -dbook -bxhtml11 fname

Che significa: crea una sezione di un libro, e un file XHTML con lo stile CSS di default.

altri comandi:

* asciidoc -v -bxhtml11 fname
* asciidoc -v -dbook -bxhtml11 note.adoc      
* asciidoc -v -dbook -bdocbook note.adoc
* asciidoc -v -dbook -bwordpress note.adoc

=== manpage

Puoi anche compilare pagine man, ma dopo cosa te ne fai?... Le puoi convertire 
in pdf, ma in quanto a immagini, stili e altre menate ti arrangi. 


== file di configurazione

Non mi interessa granché come sono definiti, mi interesserebbe prima sapere 
DOVE SONO e per poterli modificare nel momento in cui lo ritenessi necessario. 

Si trovano da qualche parte in /etc/asciidoc/asciidoc.conf

se li vuoi modificare li devi copiare in 

    $HOME/.ascidoc/

Essendo molto numerosi, il meccanismo di gestione di questi file è abbastanza 
complesso. Considera solo il caso in cui questi vengono messi nella directory 
dell'utente ($HOME). 

=== asciidoctor

asciidoc utilizza un package python, ed era l'unico sofwtare per poterlo 
gestire,  fintantoché github non ha sviluppato asciidoctor, implementato con 
ruby, per usare il markup in github. 

github utilizza normalmente markdown. nota che markdown viene supportato in 
javascript, asciidoc no. Ma sono due cose differenti.

In ogni caso, per il momento queste informazioni sono di scarso interesse.


== Il markup asciidoc

Vediamo come si formatta un testo in modo che possa essere riconosciuto come un 
documento asciidoc, utilizzando la 'marcatura asciidoc'. 

=== Intestazione

Un documento asciidoc può iniziare con un'intestazione. Nel caso più semplice 
l'intestazione contiene il nome del documento, il nome (cognome) dell'autore, 

----
    note.adoc
    =========
    tiziano
    v2.0, February 2003:
----

Dal momento che possiamo omettere questo dettaglio, passiamo oltre e 
dedichiamoci a cose più importanti. 

=== Sezioni

Un 'documento asciidoc' è un file di testo composto da una serie di blocchi di 
testo (elementi) con un'eventuale intestazione seguita da un eventuale 
testo descrittivo,seguiti infine da una serie di 'sezioni'. 

-----
    blocco::
        Un testo composto da più righe, o paragrafi, ma non necessariamente. 
-----

Detta così, risuta facile intuire il concetto di sezione: un blocco di testo 
che insieme agli altri forma un documento. Ogni sezione inizia con 
un'intestazione:
----
    intestazione di livello 0
    =========================

    intestazione di primo livello
    -----------------------------

    intestazione di secondo livello
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    
    intestazione di terzo livello
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    
    intestazione di quarto livello
    ++++++++++++++++++++++++++++++
----
Dal momento che questo tipo di marcatura è piuttosto scomodo, si possono usare 
quelle alternative, al momento non vedo controindicazioni. Anzi, in una ricerca 
nel testo, così si può capire se si tratta del titolo di una sezione.
----
    = intestazione di livello 0

    == intestazione di primo livello

    === intestazione di secondo livello

    ==== intestazione di terzo livello

    ===== intestazione di quarto livello
----

=== Testo in linea

testo 'evidenziato', la virgoletta singola o la sottolineatura __doppia__, 
visto che la ''doppia virgoletta'' serve per un altro scopo, modificano il 
colore del testo e lo mettono in corsivo (a volte sembra un collegamento). 

--------
testo 'evidenziato', la virgoletta singola o la sottolineatura __doppia__, 
visto che la ''doppia virgoletta'' serve per un altro scopo, modificano il 
colore del testo e lo mettono in corsivo (a volte sembra un collegamento). 
--------

testo in *grassetto*, utilizza un asterisco singolo oppure **doppio**. 
----
testo in *grassetto*, utilizza un asterisco singolo oppure **doppio**. 
----

carattere a +spaziatura costante+, usa il carattere +. In certi casi non viene 
applicato, vedi 5+5+5=4. Anche qui funziona la regola del carattere doppio 
++ 5+5+5=4 ++ . 
----
carattere a +spaziatura costante+, usa il carattere +. In certi casi non viene 
applicato, vedi 5+5+5=4. Anche qui funziona la regola del carattere doppio 
++ 5+5+5=4 ++ . 
----


'single quote'
`single quote`
----
'single quote'
`single quote`
----

''double quotes''
``double quotes``
----
''double quotes''
``double quotes``
----

#Unquoted 'text' xxx ''eee''#
----
#Unquoted 'text' xxx ''eee''#
----

^apice^ Testo normale ~pedice~
----
^apice^ Testo normale ~pedice~
----


--> popo in rosso -->

-> popo in rosso ->


----

--> popo in rosso -->

-> popo in rosso ->

----

=== paragrafi

----
Questi due paragrafi vengono interpretati in due modi diversi. Lorem ipsum 
dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. 
Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, 
nascetur ridiculus mus. Donec quam felis, ultricies nec, 

    Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula 
    eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient 
    montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, 
----

Questi due paragrafi vengono interpretati in due modi diversi. Lorem ipsum 
dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. 
Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, 
nascetur ridiculus mus. Donec quam felis, ultricies nec, 

    Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula 
    eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient 
    montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, 

----
NOTE: Questa è una nota particolare. La puoi scrivere anche così:

[NOTE]
Questa è una nota particolare. La puoi scrivere anche così:
----

NOTE: Questa è una nota particolare. La puoi scrivere anche così:

[NOTE]
Questa è una nota particolare. La puoi scrivere anche così:

=== Blocchi

Lorem ipsum dolor sit amet, consectetuer adipiscing elit. 
Aenean commodo ligula eget dolor. Aenean massa. 


Escaped: Lorem ipsum dolor sit amet, consectetuer adipiscing elit. 
Aenean commodo ligula eget dolor. Aenean massa. 
 
 
Escaped: Lorem ipsum dolor sit amet, consectetuer adipiscing elit. 
Aenean commodo ligula eget dolor. Aenean massa. \{qwe} and +++{qwe}+++


.Questa dovrebbe essere una sidebar
*****

Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula 
eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient 
montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, 

*****

=== source-highlight

Cosa devo fare per evitare questi errori??? Lorem ipsum dolor sit amet, 
consectetuer adipiscing elit. 


    asciidoc: DEPRECATED: note.adoc: line 451: old qanda list syntax

    /bin/sh: 1: source-highlight: not found


[source,python]
-------------------------------------------
print "hello"
-------------------------------------------


[source,c]
for {int i=0; i<100; i++} {
    int x=i;
    }


Non hai installato il package source-highlight !!!

Leggiti bene il file /usr/share/doc/asciidoc/doc/source-highlight-filter.txt

Devi copiare il file /etc/asciidoc/asciidoc.conf

in

/home/tiziano/.asciidoc/asciidoc.conf

e togliere il commento alla riga 

# Uncomment to use the Pygments source highlighter instead of GNU highlighter.
#pygments=

se hai installato python-pygments, vedrai che gli errori se ne vanno...

= fine

Mi fermerei qui, non vale la pena per il momento continuare oltre. In 
conclusione potrei dire che asciidoc, rispetto a reST, non presenta molti 
vantaggi per quanto riguarda la strutturazione di un testo **in geany**. 

Potrebbe presentare dei vantaggi nella compilazione di documenti HTML, ma 
questo non è il mio primo obiettivo. Per produrre un PDF, devi usare 
LibreOffice, e questi sono solo appunti da re-impaginare.

Un'ultima nota riguardo a pygments:

Se usi il comando:

    pygmentize -o qt.rtf quicktest.py

e inserisci (file) il file rtf generato in libreoffice, ottieni un listato 
evidenziato correttamente. 


== pandoc

Dopo aver parlato col ciampa, sembra che questo "coso" sia in grado di 
convertire moltissimi linguaggi di markup. 

Potrebbe esserci la possibilità di convertire un file .odf in asciidoc e poi di 
riconvertire in (??? pdf, html, odf ???), mi sembra una cosa un po' 
acrobatica... rimane il fatto he per arrivare al pdf bisogna sempre passare per 
latex. 



 


